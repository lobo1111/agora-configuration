<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog 
    logicalFilePath="does-not-matter"
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd"> 

    <changeSet author='tkopacki' id='timer-table'>
        <sql>        
            CREATE TABLE EJB__TIMER__TBL (
            `CREATIONTIMERAW`      BIGINT        NOT NULL,
            `BLOB`                 BLOB,
            `TIMERID`              VARCHAR(255)  NOT NULL,
            `CONTAINERID`          BIGINT        NOT NULL,
            `OWNERID`              VARCHAR(255)  NULL,
            `STATE`                INTEGER       NOT NULL,
            `PKHASHCODE`           INTEGER       NOT NULL,
            `INTERVALDURATION`     BIGINT        NOT NULL,
            `INITIALEXPIRATIONRAW` BIGINT        NOT NULL,
            `LASTEXPIRATIONRAW`    BIGINT        NOT NULL,
            `SCHEDULE`             VARCHAR(255)  NULL,
            `APPLICATIONID`        BIGINT        NOT NULL,
            CONSTRAINT `PK_EJB__TIMER__TBL` PRIMARY KEY (`TIMERID`)
            );
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='account-table'>
        <sql>        
            CREATE TABLE `account` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `number` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `parrent_account_id` int(11) DEFAULT NULL,
            `bank_id` int(11) NOT NULL,
            `community_id` int(11) DEFAULT NULL,
            `type_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `account_parent_account_fkey` (`parrent_account_id`),
            KEY `bank_id_fkey` (`bank_id`),
            KEY `account_type_fkey` (`type_id`),
            KEY `account_community_id_fkey` (`community_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=15 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='address-table'>
        <sql>        
            CREATE TABLE `address` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `street` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `house_number` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `flat_number` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `postal_code` varchar(5) COLLATE utf8_polish_ci DEFAULT NULL,
            `city` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=106 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='bank-table'>
        <sql>        
            CREATE TABLE `bank` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `bankKey` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `company_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `bank_company_fkey` (`company_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='booking-period-table'>
        <sql>        
            CREATE TABLE `booking_period` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `default_period` tinyint(1) DEFAULT NULL,
            `name` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `active` tinyint(1) DEFAULT '1',
            `period_order` int(11) NOT NULL DEFAULT '1',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-table'>
        <sql>        
            CREATE TABLE `charging` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `possession_id` int(11) NOT NULL,
            `booking_period_id` int(11) NOT NULL,
            `month` int(11) NOT NULL,
            `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            PRIMARY KEY (`id`),
            KEY `charging_possession_id_fkey` (`possession_id`),
            KEY `charging_booking_period_id_fkey` (`booking_period_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=70 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-element-table'>
        <sql>        
            CREATE TABLE `charging_element` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `charging_id` int(11) NOT NULL,
            `group_id` int(11) NOT NULL,
            `key_value` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `name` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `element_value` decimal(10,2) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `charging_id_fkey` (`charging_id`),
            KEY `charging_group_id_fkey` (`group_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=70 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-queue-table'>
        <sql>        
            CREATE TABLE `charging_queue` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `charge_type` enum('ALL','COMMUNITY','POSSESSION') COLLATE utf8_polish_ci NOT NULL,
            `community_id` int(11) DEFAULT NULL,
            `possession_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `charging_queue_possession_id_fkey` (`possession_id`),
            KEY `charging_queue_community_id_fkey` (`community_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=9 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='community-table'>
        <sql>        
            CREATE TABLE `community` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `area` decimal(10,2) DEFAULT NULL,
            `in_date` date DEFAULT NULL,
            `company_id` int(11) NOT NULL,
            `default_account_id` int(11) DEFAULT NULL,
            `repair_fund_account_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `community_company_fkey` (`company_id`),
            KEY `community_default_account_id_fkey` (`default_account_id`),
            KEY `community_repair_fund_account_id_fkey` (`repair_fund_account_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=6 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='company-table'>
        <sql>        
            CREATE TABLE `company` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `nip` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `regon` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `www` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `email` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_1` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_2` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_3` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `address_id` int(11) NOT NULL,
            `name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            KEY `company_address_fkey` (`address_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=26 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-table'>
        <sql>        
            CREATE TABLE `dictionary` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `type_id` int(11) NOT NULL,
            `dictionaryKey` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `value` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `type_id` (`type_id`,`dictionaryKey`),
            KEY `dictionaryKey` (`dictionaryKey`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=74 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-type-table'>
        <sql>        
            CREATE TABLE `dictionary_type` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `type` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `type` (`type`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=11 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-table'>
        <sql>        
            CREATE TABLE `element` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `group_id` int(11) NOT NULL,
            `key_value` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `name` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `global_value` decimal(10,2) NOT NULL DEFAULT '0.00',
            `default_element` tinyint(1) NOT NULL DEFAULT '1',
            `algorithm` varchar(1024) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `element_key` (`key_value`),
            KEY `element_group_id_fkey` (`group_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-community-table'>
        <sql>        
            CREATE TABLE `element_community` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `element_id` int(11) NOT NULL,
            `community_id` int(11) NOT NULL,
            `value` decimal(10,2) NOT NULL DEFAULT '0.00',
            `override_parent_value` tinyint(1) DEFAULT '0',
            PRIMARY KEY (`id`),
            KEY `element_community_element_id_fkey` (`element_id`),
            KEY `element_community_community_id_fkey` (`community_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=6 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-possession-table'>
        <sql>        
            CREATE TABLE `element_possession` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `element_id` int(11) NOT NULL,
            `possession_id` int(11) NOT NULL,
            `value` decimal(10,2) NOT NULL DEFAULT '0.00',
            `override_parent_value` tinyint(1) DEFAULT '0',
            `element_community_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `element_possession_element_id_fkey` (`element_id`),
            KEY `element_possession_possession_id_fkey` (`possession_id`),
            KEY `element_possession_element_community_id_fkey` (`element_community_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=38 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='incoming-payment-document-table'>
        <sql>        
            CREATE TABLE `incoming_payment_document` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `sender` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `dateFrom` date DEFAULT NULL,
            `dateTo` date DEFAULT NULL,
            `accountNumber` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `extractNumber` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `income` decimal(10,2) DEFAULT NULL,
            `spending` decimal(10,2) DEFAULT NULL,
            `positionCounter` int(11) DEFAULT NULL,
            `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='incoming-payment-document-position-table'>
        <sql>        
            CREATE TABLE `incoming_payment_document_position` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `positionNo` int(11) DEFAULT NULL,
            `income` decimal(10,3) DEFAULT NULL,
            `clientNumber` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `requestDate` date DEFAULT NULL,
            `bookingDate` date DEFAULT NULL,
            `title` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `clientName` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `clientAddress` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `clientAccountNumber` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `document_id` int(11) NOT NULL,
            `status_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `incoming_payment_document_position_fkey` (`document_id`),
            KEY `incoming_payment_document_position_status_fkey` (`status_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='log-table'>
        <sql>        
            CREATE TABLE `log` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `level` varchar(64) COLLATE utf8_polish_ci NOT NULL,
            `message` varchar(1024) COLLATE utf8_polish_ci NOT NULL,
            `thread_id` int(11) NOT NULL,
            `thread_name` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `uuid` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1520610 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='contractor-table'>
        <sql>        
            CREATE TABLE `contractor` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `community_id` int(11) NOT NULL,
            `company_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `contractor_community_fkey` (`community_id`),
            KEY `contractor_company_id_fkey` (`company_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=13 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='owner-table'>
        <sql>        
            CREATE TABLE `owner` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `address_id` int(11) DEFAULT NULL,
            `possession_id` int(11) DEFAULT NULL,
            `person_id` int(11) DEFAULT NULL,
            `company_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `owner_address_fkey` (`address_id`),
            KEY `owner_possession_fkey` (`possession_id`),
            KEY `owner_person_fkey` (`person_id`),
            KEY `owner_company_fkey` (`company_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=30 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-algorithm-table'>
        <sql>        
            CREATE TABLE `payment_algorithm` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `algorithm` varchar(512) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=3 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-table'>
        <sql>        
            CREATE TABLE `payment_rent` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `possession_id` int(11) NOT NULL,
            `booking_period_id` int(11) NOT NULL,
            `month` int(11) NOT NULL,
            `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            PRIMARY KEY (`id`),
            KEY `payment_rent_possession_id_fkey` (`possession_id`),
            KEY `payment_rent_booking_period_id_fkey` (`booking_period_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=5 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-details-table'>
        <sql>        
            CREATE TABLE `payment_rent_details` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `payment_rent_id` int(11) NOT NULL,
            `account_id` int(11) NOT NULL,
            `rent_value` decimal(10,2) DEFAULT NULL,
            `is_auto` tinyint(1) NOT NULL DEFAULT '0',
            `requestDate` date DEFAULT NULL,
            `bookingDate` date DEFAULT NULL,
            `title` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            `clientName` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `payment_rent_details_payment_rent_id_fkey` (`payment_rent_id`),
            KEY `payment_rent_details_account_id_fkey` (`account_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=4 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='person-table'>
        <sql>        
            CREATE TABLE `person` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `first_name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `last_name` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `pesel` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_1` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_2` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `phone_number_3` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `email` varchar(150) COLLATE utf8_polish_ci DEFAULT NULL,
            `address_id` int(11) NOT NULL,
            `nip` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `person_address_fkey` (`address_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=28 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='possession-table'>
        <sql>        
            CREATE TABLE `possession` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `address_id` int(11) NOT NULL,
            `community_id` int(11) NOT NULL,
            `area` decimal(10,2) DEFAULT NULL,
            `share` decimal(10,2) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `possession_address_fkey` (`address_id`),
            KEY `possession_community_fkey` (`community_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=39 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='possession-additional-data-table'>
        <sql>        
            CREATE TABLE `possession_additional_data` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `possession_id` int(11) NOT NULL,
            `people` int(11) DEFAULT '0',
            `rooms` int(11) DEFAULT '0',
            `declared_area` decimal(10,2) DEFAULT '0.00',
            `declared_share` decimal(10,2) DEFAULT '0.00',
            `hot_water` decimal(10,2) DEFAULT '0.00',
            `cold_water` decimal(10,2) DEFAULT '0.00',
            `account_id` int(11) DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `possession_possession_fkey` (`possession_id`),
            KEY `possession_additional_data_account_id_fkey` (`account_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=38 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='script-scheduler-table'>
        <sql>        
            CREATE TABLE `script_scheduler` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            `enabled` tinyint(1) NOT NULL,
            `schedule` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `name_UNIQUE` (`name`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1052 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='template-table'>
        <sql>        
            CREATE TABLE `template` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `name` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            `source` text COLLATE utf8_polish_ci,
            PRIMARY KEY (`id`),
            UNIQUE KEY `name_UNIQUE` (`name`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=66 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='template-variable-table'>
        <sql>        
            CREATE TABLE `template_variable` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `template_id` int(11) NOT NULL,
            `name` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            `data` text COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `template_id` (`template_id`,`name`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=12304 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='user-table'>
        <sql>        
            CREATE TABLE `user` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `login` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            `password` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `person_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `login_UNIQUE` (`login`),
            KEY `user_person_fkey` (`person_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=2 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='user-group-table'>
        <sql>        
            CREATE TABLE `user_group` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `user` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            `name` varchar(45) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            KEY `group_user_fkey` (`user`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=3 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='zpk-table'>
        <sql>        
            CREATE TABLE `zpk` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `number` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `community_id` int(11) NOT NULL,
            `possession_id` int(11) DEFAULT NULL,
            `contractor_id` int(11) DEFAULT NULL,
            `account_id` int(11) DEFAULT NULL,
            `type_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `zpk_community_fkey` (`community_id`),
            KEY `zpk_possession_fkey` (`possession_id`),
            KEY `zpk_contractor_fkey` (`contractor_id`),
            KEY `zpk_type_fkey` (`type_id`),
            KEY `zpk_account_id_fkey` (`account_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=60 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='zpk-balance-table'>
        <sql>        
            CREATE TABLE `zpk_balance` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `credit` decimal(10,2) DEFAULT '0.00',
            `debit` decimal(10,2) DEFAULT '0.00',
            `start_credit` decimal(10,2) DEFAULT '0.00',
            `start_debit` decimal(10,2) DEFAULT '0.00',
            `zpk_id` int(11) NOT NULL,
            `booking_period_id` int(11) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `zbk_balance_zpk_fkey` (`zpk_id`),
            KEY `zbk_balance_booking_period_fkey` (`booking_period_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=58 ;
        </sql>
    </changeSet>
    
    
    <changeSet author='tkopacki' id='account-fkeys'>
        <sql>       
            ALTER TABLE `account`
            ADD CONSTRAINT `account_community_id_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `account_parent_account_fkey` FOREIGN KEY (`parrent_account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `account_type_fkey` FOREIGN KEY (`type_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `bank_id_fkey` FOREIGN KEY (`bank_id`) REFERENCES `bank` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='bank-fkeys'>
        <sql>                   
            ALTER TABLE `bank`
            ADD CONSTRAINT `bank_company_fkey` FOREIGN KEY (`company_id`) REFERENCES `company` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-fkeys'>
        <sql>       
            ALTER TABLE `charging`
            ADD CONSTRAINT `charging_booking_period_id_fkey` FOREIGN KEY (`booking_period_id`) REFERENCES `booking_period` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `charging_possession_id_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-element-fkeys'>
        <sql>       
            ALTER TABLE `charging_element`
            ADD CONSTRAINT `charging_group_id_fkey` FOREIGN KEY (`group_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `charging_id_fkey` FOREIGN KEY (`charging_id`) REFERENCES `charging` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-queue-fkeys'>
        <sql>       
            ALTER TABLE `charging_queue`
            ADD CONSTRAINT `charging_queue_community_id_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `charging_queue_possession_id_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='community-fkeys'>
        <sql>       
            ALTER TABLE `community`
            ADD CONSTRAINT `community_repair_fund_account_id_fkey` FOREIGN KEY (`repair_fund_account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `community_company_fkey` FOREIGN KEY (`company_id`) REFERENCES `company` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `community_default_account_id_fkey` FOREIGN KEY (`default_account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='company-fkeys'>
        <sql>       
            ALTER TABLE `company`
            ADD CONSTRAINT `company_address_fkey` FOREIGN KEY (`address_id`) REFERENCES `address` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-fkeys'>
        <sql>       
            ALTER TABLE `dictionary`
            ADD CONSTRAINT `dicitonary_type_fkey` FOREIGN KEY (`type_id`) REFERENCES `dictionary_type` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-fkeys'>
        <sql>       
            ALTER TABLE `element`
            ADD CONSTRAINT `element_group_id_fkey` FOREIGN KEY (`group_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-community-fkeys'>
        <sql>       
            ALTER TABLE `element_community`
            ADD CONSTRAINT `element_community_community_id_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `element_community_element_id_fkey` FOREIGN KEY (`element_id`) REFERENCES `element` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element-possession-fkeys'>
        <sql>       
            ALTER TABLE `element_possession`
            ADD CONSTRAINT `element_possession_element_community_id_fkey` FOREIGN KEY (`element_community_id`) REFERENCES `element_community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `element_possession_element_id_fkey` FOREIGN KEY (`element_id`) REFERENCES `element` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `element_possession_possession_id_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='incoming-payment-document-position-fkeys'>
        <sql>       
            ALTER TABLE `incoming_payment_document_position`
            ADD CONSTRAINT `incoming_payment_document_position_status_fkey` FOREIGN KEY (`status_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `incoming_payment_document_position_fkey` FOREIGN KEY (`document_id`) REFERENCES `incoming_payment_document` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='contractor-fkeys'>
        <sql>       
            ALTER TABLE `contractor`
            ADD CONSTRAINT `contractor_community_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `contractor_contractor_id_fkey` FOREIGN KEY (`company_id`) REFERENCES `company` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='owner-fkeys'>
        <sql>       
            ALTER TABLE `owner`
            ADD CONSTRAINT `owner_address_fkey` FOREIGN KEY (`address_id`) REFERENCES `address` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `owner_company_fkey` FOREIGN KEY (`company_id`) REFERENCES `company` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `owner_person_fkey` FOREIGN KEY (`person_id`) REFERENCES `person` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `owner_possession_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-fkeys'>
        <sql>       
            ALTER TABLE `payment_rent`
            ADD CONSTRAINT `payment_rent_booking_period_id_fkey` FOREIGN KEY (`booking_period_id`) REFERENCES `booking_period` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `payment_rent_possession_id_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-details-fkeys'>
        <sql>       
            ALTER TABLE `payment_rent_details`
            ADD CONSTRAINT `payment_rent_details_account_id_fkey` FOREIGN KEY (`account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `payment_rent_details_payment_rent_id_fkey` FOREIGN KEY (`payment_rent_id`) REFERENCES `payment_rent` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='person-fkeys'>
        <sql>       
            ALTER TABLE `person`
            ADD CONSTRAINT `person_address_fkey` FOREIGN KEY (`address_id`) REFERENCES `address` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='possession-fkeys'>
        <sql>       
            ALTER TABLE `possession`
            ADD CONSTRAINT `possession_address_fkey` FOREIGN KEY (`address_id`) REFERENCES `address` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `possession_community_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='possession-additional-data-fkeys'>
        <sql>       
            ALTER TABLE `possession_additional_data`
            ADD CONSTRAINT `possession_additional_data_account_id_fkey` FOREIGN KEY (`account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `possession_additional_possession_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='template-variable-fkeys'>
        <sql>       
            ALTER TABLE `template_variable`
            ADD CONSTRAINT `template_variables_fkey` FOREIGN KEY (`template_id`) REFERENCES `template` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='user-fkeys'>
        <sql>       
            ALTER TABLE `user`
            ADD CONSTRAINT `user_person_fkey` FOREIGN KEY (`person_id`) REFERENCES `person` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='user-group-fkeys'>
        <sql>       
            ALTER TABLE `user_group`
            ADD CONSTRAINT `group_user_fkey` FOREIGN KEY (`user`) REFERENCES `user` (`login`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='zpk-fkeys'>
        <sql>       
            ALTER TABLE `zpk`
            ADD CONSTRAINT `zpk_account_id_fkey` FOREIGN KEY (`account_id`) REFERENCES `account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `zpk_community_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `zpk_contractor_fkey` FOREIGN KEY (`contractor_id`) REFERENCES `contractor` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `zpk_possession_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `zpk_type_fkey` FOREIGN KEY (`type_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='zpk-balance-fkeys'>
        <sql>       
            ALTER TABLE `zpk_balance`
            ADD CONSTRAINT `zbk_balance_booking_period_fkey` FOREIGN KEY (`booking_period_id`) REFERENCES `booking_period` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
            ADD CONSTRAINT `zbk_balance_zpk_fkey` FOREIGN KEY (`zpk_id`) REFERENCES `zpk` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-status'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('PAYMENT_STATUS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payments-statuses-insert'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'NEW_PAYMENT', 'Nowa płatność' FROM `dictionary_type` WHERE `type` = 'PAYMENT_STATUS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'BOOKED', 'Zaksięgowana' FROM `dictionary_type` WHERE `type` = 'PAYMENT_STATUS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'CANCELED', 'Anulowana' FROM `dictionary_type` WHERE `type` = 'PAYMENT_STATUS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='zpk-default-booking-period'>
        <sql> 
            INSERT INTO `booking_period`(`default_period`, `name`, `active`) VALUES(true, 'domyślny', true);
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-algorithm-insert'>
        <sql>  
            INSERT INTO `payment_algorithm`(name, algorithm) VALUES('m.kw.', '#{scheduler.amount} * #{possession.area}');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-algorithm-insert-2'>
        <sql>  
            INSERT INTO `payment_algorithm`(name, algorithm) VALUES('kwota * woda zimna * il. osob', '#{scheduler.amount} * #{possession.coldWater} * #{possession.people}');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-elements'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('ELEMENTS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='elements-values'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'RENT', 'Czynszowe' FROM `dictionary_type` WHERE `type` = 'ELEMENTS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'UTILITIES', 'Media' FROM `dictionary_type` WHERE `type` = 'ELEMENTS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'REPAIR_FUND', 'Fundusz remontowy' FROM `dictionary_type` WHERE `type` = 'ELEMENTS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dicitonary-periods'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('PERIODS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-period'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'CURRENT', '1' FROM `dictionary_type` WHERE `type` = 'PERIODS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-property'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('PROPERTIES');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='email-properties'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailHost', 'imap.gmail.com' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailUser', 'agora.wspolnoty@gmail.com' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailPassword', 'tomasz.12' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailNew', 'invoice/new' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailProcessed', 'invoice/processed' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='bp-document-properties'>
        <sql>  
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'dateFormat', 'yyyy-MM-dd' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathSender', 'NAGLOWEK/WYSTAWCA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathDateFrom', 'NAGLOWEK/DATA_OD' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathDateTo', 'NAGLOWEK/DATA_DO' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathAccountNumber', 'NAGLOWEK/NR_RACHUNKU' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathExtractNumber', 'NAGLOWEK/NR_WYCIAGU' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathIncome', 'NAGLOWEK/UZNANIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathSpending', 'NAGLOWEK/OBCIAZENIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionCounter', 'NAGLOWEK/LICZBA_POZYCJI' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositions', 'POZYCJE/POZYCJA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionPositionNo', 'LP' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionIncome', 'UZNANIE' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientNumber', 'NR_KLIENTA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionRequestDate', 'DATA_OPERACJI' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionBookingDate', 'DATA_KSIEGOWANIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionTitle', 'TYTUL' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientName', 'KLIENT_NAZWA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientAddress', 'KLIENT_ADRES' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientAccountNumber', 'KLIENT_RACHUNEK' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpNewDocumentStatus', 'NEW' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='xml-paths'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlNewXMLs', '/home/agora/attachments/new' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlProcessedXMLs', '/home/agora/attachments/processed' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlNonXML', '/home/agora/attachments/nonXML' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlErrorXMLs', '/home/agora/attachments/error' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dicitonary-document-status'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('DOCUMENT_STATUS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='document-statuses'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'NEW', 'Nowy dokument, jeszcze nie procesowany' FROM `dictionary_type` WHERE `type` = 'DOCUMENT_STATUS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'UNKNOWN', 'Nieznany stan dokumentu' FROM `dictionary_type` WHERE `type` = 'DOCUMENT_STATUS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'PROCESSED', 'Dokument przetworzony' FROM `dictionary_type` WHERE `type` = 'DOCUMENT_STATUS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-user-groups'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('USER_GROUPS');
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='user-groups-1'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'all', 'do tej grupy należa wszyscy użytkownicy' FROM `dictionary_type` WHERE `type` = 'USER_GROUPS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'incoming-documents-bp', 'zarządzanie nadchodzącymi dokumentami z BP' FROM `dictionary_type` WHERE `type` = 'USER_GROUPS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'access-structure-manager', 'administratorzy struktury starej bazy' FROM `dictionary_type` WHERE `type` = 'USER_GROUPS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'access-data-manager', 'administratorzy danych starej bazy' FROM `dictionary_type` WHERE `type` = 'USER_GROUPS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'access-sync', 'uprawnienia do synchronizowania baz danych' FROM `dictionary_type` WHERE `type` = 'USER_GROUPS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='admin-user-insert'>
        <sql>    
            INSERT INTO `address` (`id`, `street`, `house_number`, `flat_number`, `postal_code`, `city`) VALUES
            (1, 'Krynicka', '43', '10', '50555', 'Wrocław');
            
            INSERT INTO `person` (`id`, `first_name`, `last_name`, `pesel`, `phone_number_1`, `phone_number_2`, `phone_number_3`, `email`, `address_id`) VALUES
            (1, 'Tomasz', 'Kopacki', '86041405116', '664 007 904', NULL, NULL, 'tomasz@kopacki.eu', 1);
            
            INSERT INTO `user` (`id`, `login`, `password`, `person_id`) VALUES
            (1, 'test', '9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08', 1);
            
            INSERT INTO `user_group` (`id`, `user`, `name`) VALUES
            (1, 'test', 'administrators');
        </sql>
    </changeSet>
    
    <changeSet id="dictionary-account-type" author="tkopacki"> 
        <sql> 
            INSERT INTO `dictionary_type` (`type`) VALUES ('ACCOUNT_TYPE'); 
        </sql> 
    </changeSet> 
    
    <changeSet id="accounts-types" author="tkopacki"> 
        <sql> 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, 'DEFAULT', 'Konto ogólne' FROM `dictionary_type` WHERE `type` = 'ACCOUNT_TYPE'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, 'REPAIR_FUND', 'Fundusz remontowy' FROM `dictionary_type` WHERE `type` = 'ACCOUNT_TYPE'; 
        </sql> 
    </changeSet>
   
    <changeSet id="accounts-types-2" author="tkopacki"> 
        <sql> 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, 'RENT', 'Konto czynszowe' FROM `dictionary_type` WHERE `type` = 'ACCOUNT_TYPE'; 
        </sql> 
    </changeSet>
    <changeSet id="accounts-types-3" author="tkopacki"> 
        <sql> 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, 'INDIVIDUAL', 'Konto indywidualne' FROM `dictionary_type` WHERE `type` = 'ACCOUNT_TYPE'; 
        </sql> 
    </changeSet>
    <changeSet author='tkopacki' id='dictionary-zpks'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('ZPKS');
        </sql>
    </changeSet>
    
    <changeSet id="zpk-pools" author="tkopacki"> 
        <sql> 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '201', 'Czynsze' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '202', 'Fundusz remontowy' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '203', 'Kontrahenci' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '501', 'Kontrahenci - koszty' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '701', 'Wspólnota' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '801', 'Wspólnota' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '131', 'Konto ogólne' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`) 
            SELECT id, '132', 'Konto na fundusz remontowy' FROM `dictionary_type` WHERE `type` = 'ZPKS'; 
        </sql> 
    </changeSet>
    
    <changeSet author='tkopacki' id='dictionary-zpks-settings'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('ZPKS_SETTINGS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='internal-payment-table'>
        <sql>        
            CREATE TABLE `internal_payment` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `booking_period_id` int(11) NOT NULL,
            `created_date` date NOT NULL,
            `booked_date` date DEFAULT NULL,
            `credit_zpk_id` int(11) NOT NULL,
            `debit_zpk_id` int(11) NOT NULL,
            `booked` tinyint(1) NOT NULL DEFAULT '0',
            `amount` decimal(10,2) NOT NULL DEFAULT '0.00',
            `comment` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            KEY `internal_payment_booking_period_id_fkey` (`booking_period_id`),
            KEY `internal_payment_credit_zpk_id_id_fkey` (`credit_zpk_id`),
            KEY `internal_payment_debit_zpk_id_id_fkey` (`debit_zpk_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=4 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='internal-payment-fkey-1'>
        <sql>                   
            ALTER TABLE `internal_payment`
            ADD CONSTRAINT `internal_payment_booking_period_id_fkey` FOREIGN KEY (`booking_period_id`) REFERENCES `booking_period` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    <changeSet author='tkopacki' id='internal-payment-fkey-2'>
        <sql>                   
            ALTER TABLE `internal_payment`
            ADD CONSTRAINT `internal_payment_credit_zpk_id_id_fkey` FOREIGN KEY (`credit_zpk_id`) REFERENCES `zpk` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    <changeSet author='tkopacki' id='internal-payment-fkey-3'>
        <sql>                   
            ALTER TABLE `internal_payment`
            ADD CONSTRAINT `internal_payment_debit_zpk_id_id_fkey` FOREIGN KEY (`debit_zpk_id`) REFERENCES `zpk` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet id="accounts-types-update-1" author="tkopacki"> 
        <sql> 
            UPDATE `dictionary` 
            SET `dictionaryKey` = 'RENT' 
            WHERE `dictionaryKey` = 'DEFAULT' AND `type_id` IN (SELECT id FROM `dictionary_type` WHERE `type` = 'ZPKS_SETTINGS')
        </sql> 
    </changeSet>
    
    <changeSet id="default-elements-insert-1" author="tkopacki"> 
        <sql> 
            INSERT INTO `element` (`group_id`, `key_value`, `name`, `global_value`, `default_element`, `algorithm`) 
            SELECT d.id, 'S01', 'Sprzątanie', '1200.00', 1, '#{element.globalValue} * #{possession.share} / 100.0' 
            FROM dictionary AS d JOIN dictionary_type AS dtype WHERE d.type_id = dtype.id AND d.dictionaryKey = 'RENT' and dtype.type = 'ELEMENTS';
            INSERT INTO `element` (`group_id`, `key_value`, `name`, `global_value`, `default_element`, `algorithm`) 
            SELECT d.id, 'R01', 'Fundusz remontowy', '3500.00', 1, '#{element.globalValue} * #{possession.share} / 100.0' 
            FROM dictionary AS d JOIN dictionary_type AS dtype WHERE d.type_id = dtype.id AND d.dictionaryKey = 'REPAIR_FUND' and dtype.type = 'ELEMENTS';
            INSERT INTO `element` (`group_id`, `key_value`, `name`, `global_value`, `default_element`, `algorithm`) 
            SELECT d.id, 'Z01', 'Woda zimna', '2.50', 1, '#{element.globalValue} * #{possessionData.coldWater}' 
            FROM dictionary AS d JOIN dictionary_type AS dtype WHERE d.type_id = dtype.id AND d.dictionaryKey = 'UTILITIES' and dtype.type = 'ELEMENTS';
        </sql> 
    </changeSet>
    
    <changeSet id="company-default-contractor-column-add" author="tkopacki">
        <sql>
            ALTER TABLE `company` ADD COLUMN default_contractor tinyint(1) DEFAULT NULL;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-table'>
        <sql>        
            CREATE TABLE `invoice` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `contractor_id` int(11) NOT NULL,
            `community_id` int(11) NOT NULL,
            `create_date` date NOT NULL,
            `payment_date` date NOT NULL,
            `to_pay` decimal(10,2) DEFAULT 0,
            `accepted` tinyint(1) NOT NULL,
            `payments_sum` decimal(10,2) DEFAULT 0,
            PRIMARY KEY (`id`),
            KEY `invoice_contractor_fkey` (`contractor_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=60 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-position-table'>
        <sql>        
            CREATE TABLE `invoice_position` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `invoice_id` int(11) NOT NULL,
            `position` int(11) NOT NULL,
            `name` varchar(512) NOT NULL,
            `tax_id` int(11) NOT NULL,
            `volume` int (11) NOT NULL,
            `value_net` decimal(10,2) NOT NULL,
            `value_gross` decimal(10,2) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `invoice_position_invoice_fkey` (`invoice_id`),
            KEY `invoice_tax_fkey` (`tax_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=60 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-payment-table'>
        <sql>        
            CREATE TABLE `invoice_payment` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `invoice_id` int(11) NOT NULL,
            `value_payment` decimal(10,2) NOT NULL,
            `create_date` date NOT NULL,
            `booked` tinyint(1) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `invoice_payment_invoice_fkey` (`invoice_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=60 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-contractor-fkey'>
        <sql>                   
            ALTER TABLE `invoice`
            ADD CONSTRAINT `invoice_contractor_id_fkey` FOREIGN KEY (`contractor_id`) REFERENCES `contractor` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-position-invoice-fkey'>
        <sql>                   
            ALTER TABLE `invoice_position`
            ADD CONSTRAINT `invoice_position_invoice_id_fkey` FOREIGN KEY (`invoice_id`) REFERENCES `invoice` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-position-tax-fkey'>
        <sql>                   
            ALTER TABLE `invoice_position`
            ADD CONSTRAINT `invoice_position_tax_id_fkey` FOREIGN KEY (`tax_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-payment-fkey'>
        <sql>                   
            ALTER TABLE `invoice_payment`
            ADD CONSTRAINT `invoice_payment_invoice_id_fkey` FOREIGN KEY (`invoice_id`) REFERENCES `invoice` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-community-id-fkey'>
        <sql>                   
            ALTER TABLE `invoice`
            ADD CONSTRAINT `invoice_community_id_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='taxes-dictionary'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('TAXES');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='taxes-dictionary-inserts-1'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, '0.22', '22%' FROM `dictionary_type` WHERE `type` = 'TAXES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, '0.08', '8%' FROM `dictionary_type` WHERE `type` = 'TAXES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-booked-column'>
        <sql>                   
            ALTER TABLE `invoice`
            ADD COLUMN `booked` tinyint(1) NOT NULL
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-number-column'>
        <sql>                   
            ALTER TABLE `invoice`
            ADD COLUMN `number` varchar(255) NOT NULL
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='index-account-name'>
        <sql>                   
            CREATE INDEX indx_account_name ON account (name);
        </sql>
    </changeSet>
     
    <changeSet author='tkopacki' id='counter-table'>
        <sql>        
            CREATE TABLE `counter` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `serial_number` varchar(150) COLLATE utf8_polish_ci NOT NULL,
            `type_id` int(11) NOT NULL,
            `installation` date NULL,
            `decommission` date NULL,
            `community_id` int(11) NULL,
            `possession_id` int(11) NULL,
            `parent_counter_id` int(11) NULL,
            
            PRIMARY KEY (`id`),
            KEY `counter_dictionary_fkey` (`type_id`),
            KEY `counter_community_fkey` (`community_id`),
            KEY `counter_possession_fkey` (`possession_id`),
            KEY `counter_counter_fkey` (`parent_counter_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1 ;
        </sql>
    </changeSet>
     
    <changeSet author='tkopacki' id='counter-status-table'>
        <sql>        
            CREATE TABLE `counter_status` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `counter_id` int(11) NOT NULL,
            `timestamp` date NOT NULL,
            `status` decimal(10,2) DEFAULT NULL,
            
            PRIMARY KEY (`id`),
            KEY `counter_status_counter_fkey` (`counter_id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1 ;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-type-fkey'>
        <sql>                   
            ALTER TABLE `counter`
            ADD CONSTRAINT `counter_type_id_fkey` FOREIGN KEY (`type_id`) REFERENCES `dictionary` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-community-fkey'>
        <sql>                   
            ALTER TABLE `counter`
            ADD CONSTRAINT `counter_community_id_fkey` FOREIGN KEY (`community_id`) REFERENCES `community` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-possession-fkey'>
        <sql>                   
            ALTER TABLE `counter`
            ADD CONSTRAINT `counter_possession_id_fkey` FOREIGN KEY (`possession_id`) REFERENCES `possession` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-counter-fkey'>
        <sql>                   
            ALTER TABLE `counter`
            ADD CONSTRAINT `counter_counter_id_fkey` FOREIGN KEY (`parent_counter_id`) REFERENCES `counter` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-status-counter-fkey'>
        <sql>                   
            ALTER TABLE `counter_status`
            ADD CONSTRAINT `counter_status_counter_id_fkey` FOREIGN KEY (`counter_id`) REFERENCES `counter` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counters-types-dictionary'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('COUNTERS_TYPES');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counters-types-inserts-1'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'HEATING', 'Ogrzewanie' FROM `dictionary_type` WHERE `type` = 'COUNTERS_TYPES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'COLD_WATER', 'Woda zimna' FROM `dictionary_type` WHERE `type` = 'COUNTERS_TYPES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'HOT_WATER', 'Woda ciepła' FROM `dictionary_type` WHERE `type` = 'COUNTERS_TYPES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-decomission-typo'>
        <sql>                   
            ALTER TABLE `counter`
            change decommission decomission varchar (150) NULL
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='postal-code-6-chars'>
        <sql>                   
            ALTER TABLE `address`
            MODIFY `postal_code` VARCHAR(6)
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='payment-rent-type-flag'>
        <sql>                   
            ALTER TABLE `payment_rent`
            ADD COLUMN `repair_fund` tinyint(1) DEFAULT '0'
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='payment-rent-internal-payment'>
        <sql>                   
            ALTER TABLE `payment_rent`
            ADD COLUMN `internal_payment_id` int(11)
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='charging-internal-payment'>
        <sql>                   
            ALTER TABLE `charging`
            ADD COLUMN `internal_payment_id` int(11)
        </sql>
    </changeSet>

    <changeSet author='tkopacki' id='invoice-payment-internal-payment'>
        <sql>                   
            ALTER TABLE `invoice_payment`
            ADD COLUMN `internal_payment_id` int(11)
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-internal-payment-fkey'>
        <sql>                   
            ALTER TABLE `payment_rent`
            ADD CONSTRAINT `payment_rent_internal_payment_id_fkey` FOREIGN KEY (`internal_payment_id`) REFERENCES `internal_payment` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='charging-internal-payment-fkey'>
        <sql>                   
            ALTER TABLE `charging`
            ADD CONSTRAINT `charging_internal_payment_id_fkey` FOREIGN KEY (`internal_payment_id`) REFERENCES `internal_payment` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-payment-internal-payment-fkey'>
        <sql>                   
            ALTER TABLE `invoice_payment`
            ADD CONSTRAINT `invoice_payment_internal_payment_id_fkey` FOREIGN KEY (`internal_payment_id`) REFERENCES `internal_payment` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element_drop_algorithm_column'>
        <sql>                   
            ALTER TABLE `element`
            DROP COLUMN `algorithm`
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='element_add_algorithm_id_column'>
        <sql>                   
            ALTER TABLE `element`
            ADD COLUMN `algorithm_id` int(11)
        </sql>
    </changeSet>
        
    <changeSet author='tkopacki' id='element_algorithm_id_fkey'>
        <sql>                   
            ALTER TABLE `element`
            ADD CONSTRAINT `element_algorithm_id_fkey` FOREIGN KEY (`algorithm_id`) REFERENCES `payment_algorithm` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='payment-rent-comment-column'>
        <sql>                   
            ALTER TABLE `payment_rent`
            ADD COLUMN `comment` varchar(1024)
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='counter-replacement-of-column'>
        <sql>                   
            ALTER TABLE `counter`
            ADD COLUMN `replacement_of` int(11)
        </sql>
    </changeSet>
             
    <changeSet author='tkopacki' id='counter-replacement-of-column-fkey'>
        <sql>                   
            ALTER TABLE `counter`
            ADD CONSTRAINT `counter_counter_replacement_fkey` FOREIGN KEY (`replacement_of`) REFERENCES `counter` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='possession-additional-data-heat-column'>
        <sql>                   
            ALTER TABLE `possession_additional_data`
            ADD COLUMN `heat` decimal(10,2) DEFAULT '0.00'
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='invoice-position-volume-to-decimal'>
        <sql>                   
            ALTER TABLE `invoice_position` 
            CHANGE `volume` `volume` DECIMAL(10,2) DEFAULT "0" 
        </sql>
    </changeSet>
     
    <changeSet author='tkopacki' id='possession-comment-1'>
        <sql>                   
            ALTER TABLE `possession`
            ADD COLUMN `comment1` text
        </sql>
    </changeSet>
     
    <changeSet author='tkopacki' id='possession-comment-2'>
        <sql>                   
            ALTER TABLE `possession`
            ADD COLUMN `comment2` text
        </sql>
    </changeSet>
</databaseChangeLog> 
