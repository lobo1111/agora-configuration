<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog 
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd"> 
    <changeSet author='tkopacki' id='dictionary-table'>
        <sql>       
            CREATE TABLE `dictionary` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `type_id` int(11) NOT NULL,
            `dictionaryKey` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            `value` varchar(255) COLLATE utf8_polish_ci DEFAULT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `type_id` (`type_id`,`dictionaryKey`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1 ;

            CREATE TABLE `dictionary_type` (
            `id` int(11) NOT NULL AUTO_INCREMENT,
            `type` varchar(255) COLLATE utf8_polish_ci NOT NULL,
            PRIMARY KEY (`id`),
            UNIQUE KEY `type` (`type`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1 ;

            ALTER TABLE  `dictionary` ADD INDEX (  `dictionaryKey` );
            
            ALTER TABLE  `dictionary` ADD UNIQUE (
            `type_id` ,
            `dictionaryKey`
            );
            
            ALTER TABLE `dictionary`
            ADD CONSTRAINT `dicitonary_type_fkey` FOREIGN KEY (`type_id`) REFERENCES `dictionary_type` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION;
        </sql>
    </changeSet>
            
            
    <changeSet author='tkopacki' id='dictionary-property'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('PROPERTIES');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='email-properties'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailHost', 'imap.gmail.com' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailUser', 'agora.wspolnoty@gmail.com' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailPassword', 'tomasz.12' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailNew', 'invoice/new' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'emailProcessed', 'invoice/processed' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='bp-document-properties'>
        <sql>  
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'dateFormat', 'yyyy-MM-dd' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathSender', 'NAGLOWEK/WYSTAWCA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathDateFrom', 'NAGLOWEK/DATA_OD' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathDateTo', 'NAGLOWEK/DATA_DO' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathAccountNumber', 'NAGLOWEK/NR_RACHUNKU' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathExtractNumber', 'NAGLOWEK/NR_WYCIAGU' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathIncome', 'NAGLOWEK/UZNANIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathSpending', 'NAGLOWEK/OBCIAZENIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionCounter', 'NAGLOWEK/LICZBA_POZYCJI' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositions', 'POZYCJE/POZYCJA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionPositionNo', 'LP' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionIncome', 'UZNANIE' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientNumber', 'NR_KLIENTA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionRequestDate', 'DATA_OPERACJI' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionBookingDate', 'DATA_KSIEGOWANIA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionTitle', 'TYTUL' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientName', 'KLIENT_NAZWA' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientAddress', 'KLIENT_ADRES' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpPathPositionClientAccountNumber', 'KLIENT_RACHUNEK' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'bpNewDocumentStatus', 'NEW' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='xml-paths'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlNewXMLs', '/home/agora/attachments/new' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlProcessedXMLs', '/home/agora/attachments/processed' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlNonXML', '/home/agora/attachments/nonXML' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'xmlErrorXMLs', '/home/agora/attachments/error' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='dicitonary-document-status'>
        <sql>
            INSERT INTO `dictionary_type` (`type`) VALUES
            ('DOCUMENT_STATUS');
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='document-statuses'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'NEW', 'Nowy dokument, jeszcze nie procesowany' FROM `dictionary_type` WHERE `type` = 'DOCUMENT_STATUS';
            
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'UNKNOWN', 'Nieznany stan dokumentu' FROM `dictionary_type` WHERE `type` = 'DOCUMENT_STATUS';
        </sql>
    </changeSet>
    
    <changeSet author='tkopacki' id='ms-access-db-path'>
        <sql>
            INSERT INTO `dictionary` (`type_id`, `dictionaryKey`, `value`)
            SELECT id, 'msAccessDBPath', '/home/agora/backups/ms_access/Bazy.mdb' FROM `dictionary_type` WHERE `type` = 'PROPERTIES';        
        </sql>
    </changeSet>
</databaseChangeLog>